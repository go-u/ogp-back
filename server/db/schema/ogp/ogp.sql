CREATE TABLE ogp
(
  id INT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE,
  user_id INT UNSIGNED NOT NULL,
  created_at DATETIME NOT NULL,
  updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  bookmarks INT UNSIGNED NOT NULL, # DBの負荷軽減のため集計カラムを利用

  type VARCHAR(20) CHARACTER SET ascii NOT NULL, # summary/large/player
  url VARCHAR(255) CHARACTER SET ascii NOT NULL,
  title VARCHAR(400) CHARACTER SET utf8mb4 NOT NULL,
  description VARCHAR(1000) CHARACTER SET utf8mb4 NOT NULL,
  image VARCHAR(255) CHARACTER SET ascii NOT NULL,

  PRIMARY KEY (id),
    INDEX (user_id),
    INDEX (url)
);

# 今回は簡易化のためパーティショニングは行わない
# ALTER TABLE ogp
#     PARTITION BY RANGE COLUMNS(created_at)(
#         PARTITION p2020 VALUES LESS THAN ('2021-01-01 00:00:00'),
#         PARTITION p2021 VALUES LESS THAN ('2022-01-01 00:00:00'),
#         PARTITION p2022 VALUES LESS THAN ('2023-01-01 00:00:00'),
#         PARTITION p2023 VALUES LESS THAN ('2024-01-01 00:00:00'),
#         PARTITION p2024 VALUES LESS THAN ('2025-01-01 00:00:00'),
#         PARTITION p2025 VALUES LESS THAN ('2026-01-01 00:00:00'),
#         PARTITION p2026 VALUES LESS THAN ('2027-01-01 00:00:00'),
#         PARTITION p2027 VALUES LESS THAN ('2028-01-01 00:00:00'),
#         PARTITION p2028 VALUES LESS THAN ('2029-01-01 00:00:00'),
#         PARTITION p2029 VALUES LESS THAN ('2030-01-01 00:00:00'),
#         PARTITION p2030 VALUES LESS THAN ('2031-01-01 00:00:00'),
#         PARTITION p_over VALUES LESS THAN ('2100-01-01 00:00:00')
#         );
